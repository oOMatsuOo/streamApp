/*! @name @filmgardi/videojs-subtitle-settings @version 1.0.2 @license MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):(t=t||self).videojsSubtitleSettings=e(t.videojs)}(this,function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toUpperCase()})},i=function(t){function n(e,n){return t.call(this,e,n)||this}e(n,t);var i=n.prototype;return i.apply=function(){this.player_&&this.player_.textTrackSettings&&(this.player_.textTrackSettings.updateDisplay(),this.player_.play(!0))},i.handleClick=function(t){this.apply()},n}(t.getComponent("MenuItem")),o=function(t){function n(e,n){var i;return(i=t.call(this,e,n)||this).colors_=n.colors||["#FFF","#FF0","#F00","#00F"],i.colorIndex=0,i.addClass("vjs-menu-item-color"),i}e(n,t);var i=n.prototype;return i.increamentColorIndex=function(){this.colorIndex===this.colors_.length-1?this.colorIndex=0:this.colorIndex++},i.getColor=function(){return this.increamentColorIndex(),this.colors_[this.colorIndex]},i.changeColor=function(){if(this.player_){var t=this.player_.textTrackSettings;if(t){var e=t.getValues();e.color||(e.color=this.colors_[0]),e.color=this.getColor(),t.setValues(e)}}},i.handleClick=function(e){this.changeColor(),t.prototype.handleClick.call(this,e)},n}(i),l=function(t){function n(e,n){var i;return(i=t.call(this,e,n)||this).sizes_=["0.75","1.00","1.25","1.50"],i.defaultSizes_=null,i.sizeIndex=1,i.addClass("vjs-menu-item-font"),i}e(n,t);var i=n.prototype;return i.increamentSizeIndex=function(){this.sizeIndex===this.sizes_.length-1?this.sizeIndex=0:this.sizeIndex++},i.getSize=function(){this.increamentSizeIndex();var t=this.sizes_[this.sizeIndex];return"1.00"===t?null:Number(t)},i.changeFontSize=function(){if(this.player_){var t=this.player_.textTrackSettings;if(t){var e=t.getValues();e.fontPercent||(e.fontPercent=this.defaultSizes_),e.fontPercent=this.getSize(),t.setValues(e)}}},i.handleClick=function(e){this.changeFontSize(),t.prototype.handleClick.call(this,e)},n}(i),s=function(t){function n(e,n){var i;return(i=t.call(this,e,n)||this).colors_=n.colors||["#000","#FFF","#F00","#00F"],i.colorIndex=0,i.addClass("vjs-menu-item-background"),i}e(n,t);var i=n.prototype;return i.increamentColorIndex=function(){this.colorIndex===this.colors_.length-1?this.colorIndex=0:this.colorIndex++},i.getColor=function(){return this.increamentColorIndex(),this.colors_[this.colorIndex]},i.changeColor=function(){if(this.player_){var t=this.player_.textTrackSettings;if(t){var e=t.getValues();e.color||(e.color=this.colors_[0]),e.backgroundColor=this.getColor(),t.setValues(e)}}},i.handleClick=function(e){this.changeColor(),t.prototype.handleClick.call(this,e)},n}(i),r=function(t){function n(e,n,i){var o;return(o=t.call(this,e,n)||this).menu_=i,o.addClass("vjs-menu-item-back"),o}return e(n,t),n.prototype.handleClick=function(t){this.menu_&&this.menu_.hide()},n}(i),a=t.getComponent("MenuItem"),u=t.getComponent("Component"),c=t.dom,h=function(){function t(t,e,n){this.player=t,this.options=e,this.parent=n,this.menu={}}var e=t.prototype;return e.createMenu=function(){var t=this.player,e=c.createEl("div",{className:"vjs-menu vjs-menu-subtitle-setting",tabIndex:-1}),i=c.createEl("ul",{className:"vjs-menu-content ",tabIndex:-1});this.menu=new u(t,{el:e});var h=new u(t,{el:i}),d=new a(t,{label:t.localize(n("Setting")),selectable:!1}),p=new o(t,{label:t.localize(n("TextColor")),selectable:!1}),f=new l(t,{label:t.localize(n("FontSize")),selectable:!1}),g=new s(t,{label:t.localize(n("BackgroundColor")),selectable:!1}),m=new r(t,{label:t.localize(n("Back")),selectable:!1},this);h.addChild(d),h.addChild(p),h.addChild(f),h.addChild(g),h.addChild(m),this.menu.addChild(h),this.parent&&this.parent.addChild(this.menu)},e.hide=function(){this.menu&&this.menu.unlockShowing()},e.show=function(){this.menu&&this.menu.lockShowing()},t}(),d=t.getComponent("MenuItem"),p={},f=function(t){function n(e,n,i){var o;return n.label=e.localize(n.label),n.title=e.localize(n.title),(o=t.call(this,e,n)||this).options=n,o.menuButton=i,o.initial(),o}e(n,t);var i=n.prototype;return i.initial=function(){this.createMenu()},i.createItems=function(){return[]},i.createMenu=function(){(p=new h(this.player_,{},this.menuButton)).createMenu()},i.handleClick=function(t){p.show()},n}(d);f.hide=function(){p.hide&&p.hide()},f.show=function(){p.show&&p.show()};var g=t.getComponent("TextTrackButton"),m=t.getComponent("SubsCapsMenuItem"),C=function(i){function o(t,e){var o;return void 0===e&&(e={}),e.label="subtitle",e.title=t.localize(n(e.title||"Subtitle")),(o=i.call(this,t,e)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(o.player_.language_)>-1&&(o.label_="captions"),o.menuButton_.controlText(n(o.label_)),o}e(o,i);var l=o.prototype;return l.buildCSSClass=function(){return"vjs-subtitle-setting-button "+i.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-subtitle-setting-button "+i.prototype.buildWrapperCSSClass.call(this)},l.createSubtitleSettingButon=function(){var t=this.player_,e=new f(t,{selectable:!1,label:"Setting",title:"Setting"},this);return e.addClass("vjs-subtitle-setting-menu-item"),e},l.createItems=function(){var e=[];return(e=i.prototype.createItems.call(this,e,m)).length>0&&e.map(function(t){"unknown"===t.options_.label.toLowerCase()&&t.hide()}),t.browser.IS_IPHONE||e.push(this.createSubtitleSettingButon()),e},l.handleClick=function(t){f.hide(),i.prototype.handleClick.call(this,t)},o}(g);C.prototype.kinds_=["captions","subtitles"],C.prototype.controlText_="Subtitles";var b=t.getPlugin("plugin"),v={},y=function(n){function i(e,i){var o;return(o=n.call(this,e)||this).options=t.mergeOptions(v,i),o.player.ready(function(){o.player.addClass("vjs-subtitle-settings"),o.createSettingButton()}),o}e(i,n);var o=i.prototype;return o.createSettingButton=function(){var t=this.player;this.settingButton=new C(t);var e=t.controlBar.children().length-3,n=t.controlBar.addChild(this.settingButton,{componentClass:"subtitleSettingMenu"},this.options.placementIndex||e);n.addClass("vjs-subtitle-setting-menu"),this.setButtonInnerText("subtitle setting"),n.removeClass("vjs-hidden")},o.setButtonInnerText=function(t){this.settingButton.menuButton_.$(".vjs-control-text").innerHTML=t},i}(b);return y.defaultState={},y.VERSION="1.0.2",t.registerPlugin("subtitleSettings",y),y});
